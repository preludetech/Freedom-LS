<c-vars src caption="" height="600px" />

{% load content_tags %}

{% comment %}
Look up the File object by file_path to get the actual PDF file URL

Usage:
<c-pdf_embed src="path/to/document.pdf" caption="My Document" />
<c-pdf_embed src="path/to/document.pdf" height="800px" />
{% endcomment %}

{% with file_obj=src|get_file_by_path:content_instance %}
    {% if file_obj %}
        <div class="my-6">
            <figure class="max-w-4xl mx-auto">
                <!-- PDF Embed -->
                <div class="relative w-full overflow-hidden rounded-lg shadow-md border border-gray-300" style="height: {{ height }};">
                    <iframe
                        class="w-full h-full"
                        src="{{ file_obj.file.url }}"
                        type="application/pdf"
                        title="{% if caption %}{{ caption }}{% else %}PDF Document{% endif %}">
                    </iframe>
                </div>

                <!-- Caption and Download Button -->
                <div class="mt-3 flex justify-between items-center">
                    {% if caption %}
                        <figcaption class="text-gray-600">
                            {{ caption }}
                        </figcaption>
                    {% else %}
                        <div></div>
                    {% endif %}

                    <c-button
                        href="{{ file_obj.file.url }}"
                        variant="primary"
                        icon_left="download">
                        Download PDF
                    </c-button>
                </div>
            </figure>
        </div>
    {% else %}
        <div class="my-6 p-4 bg-red-50 border border-red-200 rounded-lg">
            <p class="text-red-700">
                PDF not found: {{ src }}
            </p>
        </div>
    {% endif %}
{% endwith %}
