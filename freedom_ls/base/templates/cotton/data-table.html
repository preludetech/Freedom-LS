<c-vars columns=""
        rows=""
        empty_message="No data available"
        class=""
        page_obj=""
        sort_by=""
        sort_order=""
        base_url="" />

<div id="data-table-container">
    <div class="overflow-x-auto {{ class }}">
        <table>
            <thead>
                <tr>
                    {% for column in columns %}
                        <th {% if column.header_class %}class="{{ column.header_class }}"{% endif %}>
                            {% if column.sortable %}
                                {% comment %}Sortable header{% endcomment %}
                                {% if sort_by == column.sort_field %}
                                    {% comment %}Currently sorted by this column{% endcomment %}
                                    {% if sort_order == 'asc' %}
                                        <a href="?sort={{ column.sort_field }}&order=desc"
                                           hx-get="{{ base_url }}?sort={{ column.sort_field }}&order=desc"
                                           hx-target="#data-table-container"
                                           hx-swap="outerHTML"
                                           class="cursor-pointer hover:text-blue-600 inline-flex items-center gap-2">
                                            {{ column.header }}
                                            <i class="fa fa-sort-up" aria-hidden="true"></i>
                                        </a>
                                    {% else %}
                                        <a href="?sort={{ column.sort_field }}&order=asc"
                                           hx-get="{{ base_url }}?sort={{ column.sort_field }}&order=asc"
                                           hx-target="#data-table-container"
                                           hx-swap="outerHTML"
                                           class="cursor-pointer hover:text-blue-600 inline-flex items-center gap-2">
                                            {{ column.header }}
                                            <i class="fa fa-sort-down" aria-hidden="true"></i>
                                        </a>
                                    {% endif %}
                                {% else %}
                                    {% comment %}Not currently sorted{% endcomment %}
                                    <a href="?sort={{ column.sort_field }}&order=asc"
                                       hx-get="{{ base_url }}?sort={{ column.sort_field }}&order=asc"
                                       hx-target="#data-table-container"
                                       hx-swap="outerHTML"
                                       class="cursor-pointer hover:text-blue-600 inline-flex items-center gap-2">
                                        {{ column.header }}
                                        <i class="fa fa-sort text-gray-400" aria-hidden="true"></i>
                                    </a>
                                {% endif %}
                            {% else %}
                                {% comment %}Non-sortable header{% endcomment %}
                                {{ column.header }}
                            {% endif %}
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% if rows %}
                    {% for row in rows %}
                        <tr>
                            {% for column in columns %}
                                <td {% if column.cell_class %}class="{{ column.cell_class }}"{% endif %}>
                                    {% include column.template with object=row column=column %}

                                </td>
                            {% endfor %}
                        </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="{{ columns|length }}" class="text-center text-gray-500 py-8">
                            {{ empty_message }}
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>

    {% if page_obj and page_obj.paginator.num_pages > 1 %}
        <div class="flex items-center justify-between mt-6 px-4">

            <div class="flex gap-2">
                {% if page_obj.has_previous %}
                    <a href="?page=1{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                       hx-get="{{ base_url }}?page=1{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                       hx-target="#data-table-container"
                       hx-swap="outerHTML"
                       class="btn btn-outline">
                        First
                    </a>
                    <a href="?page={{ page_obj.previous_page_number }}{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                       hx-get="{{ base_url }}?page={{ page_obj.previous_page_number }}{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                       hx-target="#data-table-container"
                       hx-swap="outerHTML"
                       class="btn btn-outline">
                        Previous
                    </a>
                {% endif %}

                {% for num in page_obj.paginator.page_range %}
                    {% if num == page_obj.number %}
                        {# Current page #}
                        <span class="btn btn-primary">{{ num }}</span>
                    {% elif num <= 2 or num >= page_obj.paginator.num_pages|add:'-1' or num >= page_obj.number|add:'-2' and num <= page_obj.number|add:'2' %}
                        {# Show: first 2 pages, last 2 pages, or pages within 2 of current #}
                        <a href="?page={{ num }}{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                           hx-get="{{ base_url }}?page={{ num }}{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                           hx-target="#data-table-container"
                           hx-swap="outerHTML"
                           class="btn btn-outline">
                            {{ num }}
                        </a>
                    {% elif num == 3 and page_obj.number > 5 %}
                        {# Show ellipsis after first 2 pages if there's a gap #}
                        <span class="btn btn-outline pointer-events-none">...</span>
                    {% elif num == page_obj.paginator.num_pages|add:'-2' and page_obj.number < page_obj.paginator.num_pages|add:'-4' %}
                        {# Show ellipsis before last 2 pages if there's a gap #}
                        <span class="btn btn-outline pointer-events-none">...</span>
                    {% endif %}
                {% endfor %}

                {% if page_obj.has_next %}
                    <a href="?page={{ page_obj.next_page_number }}{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                       hx-get="{{ base_url }}?page={{ page_obj.next_page_number }}{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                       hx-target="#data-table-container"
                       hx-swap="outerHTML"
                       class="btn btn-outline">
                        Next
                    </a>
                    <a href="?page={{ page_obj.paginator.num_pages }}{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                       hx-get="{{ base_url }}?page={{ page_obj.paginator.num_pages }}{% if sort_by %}&sort={{ sort_by }}&order={{ sort_order }}{% endif %}"
                       hx-target="#data-table-container"
                       hx-swap="outerHTML"
                       class="btn btn-outline">
                        Last
                    </a>
                {% endif %}
            </div>
        </div>
    {% endif %}
</div>

{% comment %}
Usage Examples:

The data-table provides generic cell templates for common patterns:
- cotton/data-table-cells/text.html - Simple attribute display
- cotton/data-table-cells/link.html - Links with URL generation

Basic text columns (no custom templates needed):
  columns = [
      {'header': 'Name', 'template': 'cotton/data-table-cells/text.html', 'attr': 'name'},
      {'header': 'Email', 'template': 'cotton/data-table-cells/text.html', 'attr': 'email'},
      {'header': 'Student Count', 'template': 'cotton/data-table-cells/text.html', 'attr': 'student_count'},
  ]
  rows = Cohort.objects.all()

Link columns (no custom templates needed):
  columns = [
      {
          'header': 'Cohort Name',
          'template': 'cotton/data-table-cells/link.html',
          'text_attr': 'name',
          'url_name': 'educator_interface:cohort_detail',
          'url_param': 'pk'
      },
      {'header': 'Students', 'template': 'cotton/data-table-cells/text.html', 'attr': 'student_count'},
  ]

Nested attributes (related models):
  {'header': 'User Email', 'template': 'cotton/data-table-cells/text.html', 'attr': 'user.email'}
  {'header': 'Cohort Name', 'template': 'cotton/data-table-cells/text.html', 'attr': 'cohort.name'}

Custom templates for complex cells:
  columns = [
      {'header': 'Name', 'template': 'cotton/data-table-cells/text.html', 'attr': 'name'},
      {'header': 'Courses', 'template': 'educator_interface/cells/cohort_courses.html'},
      {'header': 'Actions', 'template': 'educator_interface/cells/actions.html', 'cell_class': 'text-right'},
  ]

  # educator_interface/cells/cohort_courses.html
  {% for registration in object.course_registrations.all %}
      {{ registration.collection.title }}{% if not forloop.last %}, {% endif %}
  {% empty %}
      -
  {% endfor %}

  # educator_interface/cells/actions.html
  <div class="flex gap-2 justify-end">
      <a href="{% url 'edit' object.pk %}" class="btn btn-outline">Edit</a>
      <a href="{% url 'delete' object.pk %}" class="btn btn-danger">Delete</a>
  </div>

Column styling:
  columns = [
      {'header': 'ID', 'template': 'cotton/data-table-cells/text.html', 'attr': 'id', 'header_class': 'w-16'},
      {'header': 'Name', 'template': 'cotton/data-table-cells/text.html', 'attr': 'name', 'header_class': 'w-1/3'},
      {'header': 'Actions', 'template': 'cells/actions.html', 'cell_class': 'text-right'},
  ]

Custom empty message:
  <c-data-table columns=columns rows=rows empty_message="No cohorts found" />

Pro tips:
  - Use cotton/data-table-cells/text.html for simple attribute display
  - Use cotton/data-table-cells/link.html for links with URL generation
  - Create custom templates only for complex cells (loops, buttons, badges, etc.)
  - Each template receives 'object' (the row) and 'column' (the config)
  - Supports nested attributes with dot notation (e.g., 'user.email')
{% endcomment %}
