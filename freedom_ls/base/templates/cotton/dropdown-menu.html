{# djlint:off H037 H026 H021 #}

<c-vars trigger=""
        class=""
        trigger_class="p-2 hover:bg-gray-100 rounded-md transition-colors" />

<div class="relative inline-block {{ class }}" x-data="{ open: false }">
    <!-- 3-dots menu button -->
    <button type="button"
            @click="open = !open"
            class="{{ trigger_class }}"
            aria-label="Menu"
            x-ref="menuButton">
        {% if trigger %}
            {{ trigger }}
        {% else %}
            <i class="fa fa-ellipsis-v" aria-hidden="true"></i>
        {% endif %}
    </button>

    <!-- Dropdown menu -->
    <div x-show="open"
         @click.away="open = false"
         x-transition:enter="transition ease-out duration-100"
         x-transition:enter-start="transform opacity-0 scale-95"
         x-transition:enter-end="transform opacity-100 scale-100"
         x-transition:leave="transition ease-in duration-75"
         x-transition:leave-start="transform opacity-100 scale-100"
         x-transition:leave-end="transform opacity-0 scale-95"
         class="fixed w-40 bg-white border border-gray-200 rounded-md shadow-lg z-[9999]"
         style="display: none"
         x-init="$watch('open', value => { if (value) { const rect = $refs.menuButton.getBoundingClientRect(); $el.style.top = rect.bottom + 8 + 'px'; $el.style.left = rect.right - 160 + 'px'; } })">
        <div class="py-1 space-y-1">
            {{ slot }}
        </div>
    </div>

</div>

{# djlint:on H037 H026 H021 #}

{% comment %}
Usage Examples:

  <!-- Default 3-dots icon -->
  <c-dropdown-menu>
      <c-button dropdown="true">Edit</c-button>
      <c-button dropdown="true">Delete</c-button>
  </c-dropdown-menu>

  <!-- Custom trigger content -->
  <c-dropdown-menu trigger="Options â–¼">
      <c-button dropdown="true">Edit</c-button>
      <c-button dropdown="true">Delete</c-button>
  </c-dropdown-menu>

  <!-- Custom trigger with HTML -->
  <c-dropdown-menu trigger='<i class="fa fa-cog"></i>'>
      <c-button dropdown="true">Settings</c-button>
      <c-button dropdown="true">Preferences</c-button>
  </c-dropdown-menu>
{% endcomment %}
