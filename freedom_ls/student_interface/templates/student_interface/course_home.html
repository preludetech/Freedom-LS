{% extends "_base.html" %}

{% block title %}
    {{ course.title }}
{% endblock title %}

{% block body %}

    <div class="space-y-3 sm:space-y-4">
        <h1>
            {{ course.title }}
        </h1>
        {% if course.subtitle %}
            <p class="text-base sm:text-lg lg:text-xl text-muted">
                {{ course.subtitle }}
            </p>
        {% endif %}
    </div>

    {% if course_progress %}
        <div class="mt-6 sm:mt-8 p-4 sm:p-6 bg-surface-alt rounded-lg border border-border-light">
            <h3 class="mb-4">
                Your Progress
            </h3>
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6">
                <div class="flex flex-col gap-1">
                    <span class="text-muted text-sm">Started</span>
                    <span class="font-medium text-base">{{ course_progress.start_time|date:"M d, Y" }}</span>
                </div>
                <div class="flex flex-col gap-1">
                    <span class="text-muted text-sm">Last Accessed</span>
                    <span class="font-medium text-base">{{ course_progress.last_accessed_time|date:"M d, Y" }}</span>
                </div>
                <div class="flex flex-col gap-1">
                    {% if course_progress.completed_time %}
                        <span class="text-muted text-sm">Completed</span>
                        <span class="font-medium text-base text-success">
                            <i class="fa fa-check-circle"></i> {{ course_progress.completed_time|date:"M d, Y" }}
                        </span>
                    {% else %}
                        <span class="text-muted text-sm">Status</span>
                        <span class="font-medium text-base text-primary">
                            <i class="fa fa-spinner"></i> In Progress
                        </span>
                    {% endif %}
                </div>
            </div>
        </div>
    {% endif %}

    <div class="mt-8 sm:mt-12">
        <h2>
            Contents
        </h2>

        <div class="mt-4 sm:mt-6 space-y-2">
            {% include "student_interface/partials/course_minimal_toc.html#course-children" %}

        </div>
    </div>

    {% if user.is_authenticated %}
        {% if is_registered %}
        {% else %}
            <form method="post"
                  action="{% url 'student_interface:register_for_course' course_slug=course.slug %}"
                  class="mt-6 sm:mt-8">
                {% csrf_token %}
                <c-button type="submit" class="w-full sm:w-auto">
                    Register for Course
                </c-button>
            </form>
        {% endif %}
    {% else %}

        {% include "partials/login_prompt.html" %}

    {% endif %}

{% endblock %}
