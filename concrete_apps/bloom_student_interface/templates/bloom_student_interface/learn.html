{% extends "bloom_student_interface/_base_logged_in.html" %}

{% partialdef start_course_button %}
    <c-button href="{% url 'student_interface:register_for_course' course.slug %}">Start</c-button>
{% endpartialdef %}


{% partialdef view_course_button %}

<c-modal title="{{course.title}}">
    <c-slot name="trigger">
        <c-button variant="outline">Details</c-button>
    </c-slot>

    {% if course.subtitle %}
    <p>
        {{ course.subtitle}}
    </p>
    {% endif %}

    {% with content=course.rendered_content %}
        {% if content %}
        <c-markdown-container>
            {{ content }}
        </c-markdown-container>
        {% endif %}
    {% endwith %}

    <c-slot name="footer">
        <c-button variant="outline" @click="open = false">Close</c-button>
        {% partial start_course_button %}
    </c-slot>

</c-modal>
{% endpartialdef %}


{% partialdef content %}

<div id="main_content"  class="space-y-4">

    <div class="surface space-y-4">
        <h2>Current Courses</h2>

        {% if registered_courses %}
            <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
                {% for course in registered_courses %}
                        {% include "student_interface/partials/course_list.html#course-card" %}
                {% endfor %}
            </div>

        {% else %}
            <p class="text-gray-600">You haven't signed up for any courses yet</p>
        {% endif %}
        
    </div>

    <div class="surface space-y-4">
        <h2>Recommended Courses</h2>

        {% if recommended_courses %}
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            {% for recommendation in recommended_courses %}
                <div class="surface">
                    <div class="mb-4">
                        <h3 class="text-lg">{{ recommendation.collection.title }}</h3>
                        {% if recommendation.collection.description %}
                            <p class="text-gray-600">{{ recommendation.collection.description }}</p>
                        {% endif %}
                    </div>
                    <!-- <div class="flex flex-col gap-2 mt-auto">
                        <a href="{% url 'student_interface:course_home' recommendation.collection.slug %}" class="btn btn-primary">View Course</a>
                    </div> -->

                    <c-button-group>

                        {% with course=recommendation.collection %}
                        {% partial view_course_button %}
                        {% partial start_course_button %}
                        {% endwith %}
                    </c-button-group>

                </div>
            {% endfor %}
        </div>
        {% else %}
            <p class="text-gray-600">No recommended courses yet.</p>
        {% endif %}
    </div>

    <div class="surface space-y-4">
        <h2>Learning History</h2>
    </div>
</div>






{% endpartialdef %}




{% block title %}
My Learning
{% endblock %}


{% block content %}
{% partial content %}
{% endblock content %}